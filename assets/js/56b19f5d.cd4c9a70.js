"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1451],{27039:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"issues-troubleshooting/EmailNotificationIssues","title":"Email Notification Issues","description":"Troubleshoot email notification issues in ReportPortal QA metric dashboard with ThreadPool and SMTP configuration solutions.","source":"@site/docs/issues-troubleshooting/EmailNotificationIssues.md","sourceDirName":"issues-troubleshooting","slug":"/issues-troubleshooting/EmailNotificationIssues","permalink":"/docs/issues-troubleshooting/EmailNotificationIssues","draft":false,"unlisted":false,"editUrl":"https://github.com/reportportal/docs/blob/develop/docs/issues-troubleshooting/EmailNotificationIssues.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"Email Notification Issues","description":"Troubleshoot email notification issues in ReportPortal QA metric dashboard with ThreadPool and SMTP configuration solutions."},"sidebar":"docs","previous":{"title":"How to resolve issues with migration to the new version","permalink":"/docs/issues-troubleshooting/HowToResolveIssuesWithMigrationToTheNewVersion"},"next":{"title":"Case Studies","permalink":"/docs/case-studies/"}}');var t=s(74848),n=s(28453);const r={sidebar_label:"Email Notification Issues",description:"Troubleshoot email notification issues in ReportPortal QA metric dashboard with ThreadPool and SMTP configuration solutions."},a="Email Notification Issues",l={},c=[];function u(e){const o={a:"a",admonition:"admonition",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"email-notification-issues",children:"Email Notification Issues"})}),"\n",(0,t.jsx)(o.p,{children:"In case of observing issues with email notifications when email service stopped processing messages, RP administrators should be aware of some kinds of known issue types:"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsx)(o.li,{children:"ThreadPoolTaskExecutor capacity is too small for handling large number of queued users to be notified."}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Solution:"}),(0,t.jsx)("br",{}),"\nUpdate environment variable rp_environment_variable_executor_pool_user-email_queue with bigger value (default: 1000)."]}),"\n",(0,t.jsxs)(o.ol,{start:"2",children:["\n",(0,t.jsx)(o.li,{children:"The number of ThreadPoolTaskExecutor active threads is bigger than the number of simultaneous connections allowed by SMTP server (e.g., 10 maximum connections for gmail). That makes email server consider such heavy load as DDoS attack and refuse to establish new connections."}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Solution:"}),(0,t.jsx)("br",{}),"\nDecrease number of active threads by updating environment variable rp_environment_variable_executor_pool_user-email_max (default: 10)"]}),"\n",(0,t.jsxs)(o.p,{children:["In order to update environment variables, you should edit your docker-compose.yml file.",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(o.a,{href:"https://github.com/reportportal/reportportal/blob/2b22c61f87674aaf2efc7a973af38004c2517680/docker-compose.yml#L201",children:"Job environment variables example for docker"})]}),"\n",(0,t.jsx)(o.admonition,{type:"note",children:(0,t.jsx)(o.p,{children:"In addition, there are daily limits on sending emails from one account. Different email servers have their own restrictions (e.g. 2000 max messages for gmail)."})})]})}function d(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453:(e,o,s)=>{s.d(o,{R:()=>r,x:()=>a});var i=s(96540);const t={},n=i.createContext(t);function r(e){const o=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(n.Provider,{value:o},e.children)}}}]);