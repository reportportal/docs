"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5714],{76130:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"developers-guides/PluginDevelopersGuide/DevelopACustomImportPlugin","title":"Develop a custom import plugin","description":"This documentation guides on creating a custom import plugin for ReportPortal, using the PF4J plugin framework.","source":"@site/docs/developers-guides/PluginDevelopersGuide/DevelopACustomImportPlugin.md","sourceDirName":"developers-guides/PluginDevelopersGuide","slug":"/developers-guides/PluginDevelopersGuide/DevelopACustomImportPlugin","permalink":"/docs/developers-guides/PluginDevelopersGuide/DevelopACustomImportPlugin","draft":false,"unlisted":false,"editUrl":"https://github.com/reportportal/docs/blob/develop/docs/developers-guides/PluginDevelopersGuide/DevelopACustomImportPlugin.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Plugin developers guide","permalink":"/docs/developers-guides/PluginDevelopersGuide/"},"next":{"title":"Plugin API development guide","permalink":"/docs/developers-guides/PluginDevelopersGuide/PluginAPIDevelopersGuide"}}');var r=n(74848),o=n(28453);const l={},s="Develop a custom import plugin",a={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step-by-Step Plugin Development Guide",id:"step-by-step-plugin-development-guide",level:2},{value:"Step 1: Clone the Plugin Template",id:"step-1-clone-the-plugin-template",level:3},{value:"Step 2: Rename and Configure the Template",id:"step-2-rename-and-configure-the-template",level:3},{value:"Step 3: Implement the Plugin EntryPoint",id:"step-3-implement-the-plugin-entrypoint",level:3},{value:"Step 4: Define the Import Command",id:"step-4-define-the-import-command",level:3},{value:"Step 5: Build plugin jar",id:"step-5-build-plugin-jar",level:3},{value:"Step 6: Verify the plugin UI",id:"step-6-verify-the-plugin-ui",level:3},{value:"Add custom UI extensions if needed",id:"add-custom-ui-extensions-if-needed",level:4},{value:"Events to Manage",id:"events-to-manage",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"develop-a-custom-import-plugin",children:"Develop a custom import plugin"})}),"\n",(0,r.jsx)(t.p,{children:"This documentation guides on creating a custom import plugin for ReportPortal, using the PF4J plugin framework."}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(t.p,{children:"Before starting the development of a new import plugin, ensure you review these essential resources:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"PF4J Plugin Framework"}),": Learn about PF4J, which is the core framework for ReportPortal plugins system at ",(0,r.jsx)(t.a,{href:"https://pf4j.org",children:"pf4j.org"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Plugin Template"}),": Start with the standard plugin template available on ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-template",children:"GitHub"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Examples"}),": Examine existing plugins for importing:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["JUnit: ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-import-junit",children:"GitHub repo"})]}),"\n",(0,r.jsxs)(t.li,{children:["RobotFramework: ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-import-robot",children:"GitHub repo"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Event-Based Reporting"}),": Understand event-based interactions in ReportPortal through ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/service-api/blob/develop/src/main/java/com/epam/ta/reportportal/reporting/event/EventBasedReporting.java",children:"service-api"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Event Objects"}),": Familiarize with event objects used in reporting at ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/commons/tree/develop/src/main/java/com/epam/reportportal/events",children:"GitHub"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Start Import Endpoint"}),": Learn how to initiate importing through the UI at ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/service-api/blob/6d40590d21fef3299ed5b7e009b1cc7130863c21/src/main/java/com/epam/ta/reportportal/ws/controller/PluginController.java#L140",children:"GitHub"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-by-step-plugin-development-guide",children:"Step-by-Step Plugin Development Guide"}),"\n",(0,r.jsx)(t.h3,{id:"step-1-clone-the-plugin-template",children:"Step 1: Clone the Plugin Template"}),"\n",(0,r.jsxs)(t.p,{children:["Begin by using the ",(0,r.jsx)(t.a,{href:"https://github.com/new?template_name=plugin-template&template_owner=reportportal",children:"plugin template"})," to create a new repository and get the required boilerplate code."]}),"\n",(0,r.jsx)(t.h3,{id:"step-2-rename-and-configure-the-template",children:"Step 2: Rename and Configure the Template"}),"\n",(0,r.jsxs)(t.p,{children:["Update the naming from 'template' to something specific to your plugin need. Modify the ",(0,r.jsx)(t.code,{children:"gradle.properties"})," to set your ",(0,r.jsx)(t.code,{children:"pluginId"}),", which should be a key word without special symbols. Update the manifest appropriately ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-template/blob/698a17a862eb4a8d52274242a9f8e4ec9e6ab799/plugin/build.gradle#L101",children:"here"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"step-3-implement-the-plugin-entrypoint",children:"Step 3: Implement the Plugin EntryPoint"}),"\n",(0,r.jsxs)(t.p,{children:["Create your main class (or use from the template) annotated with ",(0,r.jsx)(t.code,{children:"@Extension"})," that implements ",(0,r.jsx)(t.code,{children:"ReportPortalExtensionPoint"})," (",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-template/blob/main/plugin/src/main/java/com/epam/reportportal/extension/template/TemplatePluginExtension.java",children:"TemplatePluginExtension"}),").\nThis class should contain all logic for integrating the new plugin with the ReportPortal system. Implement the necessary methods as shown in the earlier example snippet."]}),"\n",(0,r.jsx)(t.p,{children:"For correct representation on the UI, there should be added specific parameters to the plugin:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'  @Override\n  public Map<String, ?> getPluginParams() {\n    Map<String, Object> params = new HashMap<>();\n    params.put(ALLOWED_COMMANDS, new ArrayList<>(pluginCommandMapping.get().keySet()));\n    params.put(COMMON_COMMANDS, new ArrayList<>(commonPluginCommandMapping.get().keySet()));\n    params.put(DESCRIPTION_KEY, DESCRIPTION);\n    params.put(METADATA, Map.of(IS_INTEGRATIONS_ALLOWED, false));\n    params.put("maxFileSize", MAX_FILE_SIZE);\n    params.put("acceptFileMimeTypes", "List of acceptFileMimeTypes"));\n    return params;\n  }\n\n  @Override\n  public IntegrationGroupEnum getIntegrationGroup() {\n    return IntegrationGroupEnum.IMPORT;\n  }\n'})}),"\n",(0,r.jsx)(t.h3,{id:"step-4-define-the-import-command",children:"Step 4: Define the Import Command"}),"\n",(0,r.jsxs)(t.p,{children:["Create a class for the 'import' command that must implement the ",(0,r.jsx)(t.a,{href:"https://github.com/reportportal/plugin-api/blob/develop/src/main/java/com/epam/reportportal/extension/CommonPluginCommand.java",children:"CommonPluginCommand"})," interface. This should:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Specify the command name in the ",(0,r.jsx)(t.code,{children:"getName()"}),' method, which must return "import".']}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'    @Override\n    public String getName() {\n      return "import";\n    }\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Handle the import logic in the ",(0,r.jsx)(t.code,{children:"executeCommand(Map<String, Object> params)"})," method that includes file parsing and publishing launch reporting events."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"  @Override\n  public OperationCompletionRS executeCommand(Map<String, Object> params) {}\n"})}),"\n",(0,r.jsx)(t.p,{children:"When working with a loaded file, it's necessary to trigger events in ReportPortal. For instance, if the report contains specific step information, you need to generate a StartTestItemRQ and publish a StartChildItemRqEvent:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"  private String startTestItem(ItemInfo itemInfo) {\n    StartTestItemRQ rq = buildStartItemRq(itemInfo);\n    eventPublisher.publishEvent(\n        new StartChildItemRqEvent(this, projectName, items.peek().getUuid(), rq));\n    return rq.getUuid();\n  }\n"})}),"\n",(0,r.jsx)(t.p,{children:"The same approach used for other requests as well."}),"\n",(0,r.jsx)(t.h3,{id:"step-5-build-plugin-jar",children:"Step 5: Build plugin jar"}),"\n",(0,r.jsx)(t.p,{children:"Build plugin executable jar using standard gradle commands after implementation of the plugin is finished."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"gradle clean build\n"})}),"\n",(0,r.jsxs)(t.p,{children:["More information about the assembling of plugins can be found in ",(0,r.jsx)(t.a,{href:"/docs/developers-guides/PluginDevelopersGuide/PluginAPIDevelopersGuide#assemble-plugin",children:"PluginDevelopersGuide"})]}),"\n",(0,r.jsx)(t.h3,{id:"step-6-verify-the-plugin-ui",children:"Step 6: Verify the plugin UI"}),"\n",(0,r.jsxs)(t.p,{children:["Provide the info, mentioned in ",(0,r.jsx)(t.a,{href:"#step-3-implement-the-plugin-entrypoint",children:"step 3"}),". This will help the ReportPortal UI understand the plugin's capabilities and limitations.\nOnce the step is completed, the plugin will be available for selection in the ReportPortal UI Launch import modal. No further actions required from the plugin UI to make the import process work."]}),"\n",(0,r.jsx)(t.h4,{id:"add-custom-ui-extensions-if-needed",children:"Add custom UI extensions if needed"}),"\n",(0,r.jsxs)(t.p,{children:["The plugin template also provides a way to add custom extensions to the ReportPortal UI via plugin.\nThis setup isn't required for import process work, but can be used to provide additional pages/sections in the ReportPortal UI via React components.\nFor more information, see the ",(0,r.jsx)(t.a,{href:"/docs/developers-guides/PluginDevelopersGuide/PluginUIDevelopersGuide",children:"Plugin Developers Guide"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"events-to-manage",children:"Events to Manage"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"StartLaunchRqEvent"}),": To start a new launch."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"StartRootItemRqEvent"}),": To begin a root item just below the launch."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"StartChildItemRqEvent"}),": For starting a child item, requiring a parent UUID."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"SaveLogRqEvent"}),": For saving logs which may include file attachments."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"By following these steps and using the available resources, you can build an import plugin that is customized to your reporting requirements and integrates smoothly with ReportPortal."})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>s});var i=n(96540);const r={},o=i.createContext(r);function l(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);