"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[12073],{30152:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var i=s(85893),o=s(11151);const a={sidebar_position:4,sidebar_label:"Jobs configuration"},t="Jobs configuration",r={id:"installation-steps-advanced/JobsConfiguration",title:"Jobs configuration",description:"Currently, ReportPortal has 5 configurable jobs for data removing:",source:"@site/docs/installation-steps-advanced/JobsConfiguration.md",sourceDirName:"installation-steps-advanced",slug:"/installation-steps-advanced/JobsConfiguration",permalink:"/docs/installation-steps-advanced/JobsConfiguration",draft:!1,unlisted:!1,editUrl:"https://github.com/reportportal/docs/blob/develop/docs/installation-steps-advanced/JobsConfiguration.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,sidebar_label:"Jobs configuration"},sidebar:"docs",previous:{title:"Basic monitoring configuration",permalink:"/docs/installation-steps-advanced/BasicMonitoringConfiguration"},next:{title:"Backup & Restore Guide",permalink:"/docs/installation-steps-advanced/BackupRestoreGuide"}},l={},c=[{value:"Clean launches job",id:"clean-launches-job",level:2},{value:"Clean logs job",id:"clean-logs-job",level:2},{value:"Clean attachments info job",id:"clean-attachments-info-job",level:2},{value:"Clean attachments binaries job",id:"clean-attachments-binaries-job",level:2},{value:"Project binary storage size recalculation job",id:"project-binary-storage-size-recalculation-job",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"jobs-configuration",children:"Jobs configuration"}),"\n",(0,i.jsx)(n.p,{children:"Currently, ReportPortal has 5 configurable jobs for data removing:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clean launches"}),"\n",(0,i.jsx)(n.li,{children:"Clean logs"}),"\n",(0,i.jsx)(n.li,{children:"Clean attachments info"}),"\n",(0,i.jsx)(n.li,{children:"Clean attachments binaries"}),"\n",(0,i.jsx)(n.li,{children:"Project binary storage size recalculation"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Job execution period can be configured using environment variables, where period value should be provided as ",(0,i.jsx)(n.a,{href:"https://www.baeldung.com/cron-syntax-linux-vs-spring",children:(0,i.jsx)(n.strong,{children:"spring cron"})})," expression:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*/30 * * * * *"})," - every 30 seconds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0 */2 * * * *"})," - every 2 minutes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0 0 */24 * * *"})," - every 24 hours (every day)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/reportportal/reportportal/blob/2b22c61f87674aaf2efc7a973af38004c2517680/docker-compose.yml#L237-L241",children:"Job environment variables example for docker"})}),"\n",(0,i.jsx)(n.h2,{id:"clean-launches-job",children:"Clean launches job"}),"\n",(0,i.jsx)(n.p,{children:"Clean launches job removes launches, their test items and logs.\nEnvironment variables for configuration with default values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_CLEAN_LAUNCH_CRON=0 */10 * * * *"})," - specifies how often job will be started (every 10 minutes)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"clean-logs-job",children:"Clean logs job"}),"\n",(0,i.jsx)(n.p,{children:"Clean logs job removes logs.\nEnvironment variables for configuration with default values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_CLEAN_LOG_CRON=0 */5 * * * *"})," - specifies how often job will be started (every 5 minutes)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"clean-attachments-info-job",children:"Clean attachments info job"}),"\n",(0,i.jsxs)(n.p,{children:["Clean attachments info job removes attachments data from main ",(0,i.jsx)(n.strong,{children:"database"})," storage and puts into ",(0,i.jsx)(n.strong,{children:"temporary table"})," to remove binaries from the ",(0,i.jsx)(n.strong,{children:"file storage"}),"\nEnvironment variables for configuration with default values:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_CLEAN_ATTACHMENT_CRON=0 */2 * * * *"})," - specifies how often job will be started (every 2 minutes)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"clean-attachments-binaries-job",children:"Clean attachments binaries job"}),"\n",(0,i.jsxs)(n.p,{children:["Clean attachments binaries job uses data from the ",(0,i.jsx)(n.strong,{children:"temporary table"})," (filled by previous job)\nand removes binaries from the ",(0,i.jsx)(n.strong,{children:"file storage"}),"\nEnvironment variables for configuration with default values:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_CLEAN_STORAGE_CRON=*/30 * * * * *"})," - specifies how often job will be started (every 30 seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_CLEAN_STORAGE_CHUNKSize=1000"})," - specifies the size of the batch to be selected from the ",(0,i.jsx)(n.strong,{children:"temporary table"})," to be removed"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"project-binary-storage-size-recalculation-job",children:"Project binary storage size recalculation job"}),"\n",(0,i.jsxs)(n.p,{children:["Project binary storage size recalculation job updates ",(0,i.jsx)(n.strong,{children:"allocated storage"})," value of the ",(0,i.jsx)(n.strong,{children:"project"})," based on the existing attachments at the moment.\nEnvironment variables for configuration with default values:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RP_ENVIRONMENT_VARIABLE_STORAGE_PROJECT_CRON=0 */1 * * * *"})," - specifies how often job will be started (every minute)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);