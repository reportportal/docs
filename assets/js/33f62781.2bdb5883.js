"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[71288],{42435:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=t(85893),r=t(11151);const o={sidebar_label:"Quick Start Guide for Google Cloud Platform GKE"},l="Quick Start Guide for Google Cloud Platform GKE",a={id:"installation-steps/deploy-with-kubernetes/QuickStartWithGCPGKE",title:"Quick Start Guide for Google Cloud Platform GKE",description:"Prerequisites",source:"@site/docs/installation-steps/deploy-with-kubernetes/QuickStartWithGCPGKE.md",sourceDirName:"installation-steps/deploy-with-kubernetes",slug:"/installation-steps/deploy-with-kubernetes/QuickStartWithGCPGKE",permalink:"/docs/installation-steps/deploy-with-kubernetes/QuickStartWithGCPGKE",draft:!1,unlisted:!1,editUrl:"https://github.com/reportportal/docs/blob/develop/docs/installation-steps/deploy-with-kubernetes/QuickStartWithGCPGKE.md",tags:[],version:"current",frontMatter:{sidebar_label:"Quick Start Guide for Google Cloud Platform GKE"},sidebar:"docs",previous:{title:"Amazon Application Load Balancer Configuration Guide",permalink:"/docs/installation-steps/deploy-with-kubernetes/AmazonALBNGINXIngressController"},next:{title:"Deploy via Google Cloud Marketplace",permalink:"/docs/installation-steps/DeployViaGoogleCloudMarketplace"}},i={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Initialize the gcloud CLI",id:"initialize-the-gcloud-cli",level:2},{value:"Set up Environment Variables",id:"set-up-environment-variables",level:2},{value:"Set up gcloud credential helper",id:"set-up-gcloud-credential-helper",level:2},{value:"Adjust Google Cloud IAM",id:"adjust-google-cloud-iam",level:2},{value:"Create a GKE cluster",id:"create-a-gke-cluster",level:2},{value:"Create a cluster in Autopilot mode",id:"create-a-cluster-in-autopilot-mode",level:3},{value:"Create a cluster in Standard mode",id:"create-a-cluster-in-standard-mode",level:3},{value:"Get cluster credentials for kubectl",id:"get-cluster-credentials-for-kubectl",level:3},{value:"Verify the cluster mode",id:"verify-the-cluster-mode",level:3},{value:"Prepare Helm package for installation",id:"prepare-helm-package-for-installation",level:2},{value:"Create a repository",id:"create-a-repository",level:3},{value:"Authenticate with the repository",id:"authenticate-with-the-repository",level:3},{value:"Build and push Helm chart",id:"build-and-push-helm-chart",level:3},{value:"Install ReportPortal from Artifact Registry",id:"install-reportportal-from-artifact-registry",level:2},{value:"Install Helm chart on GKE Autopilot Cluster",id:"install-helm-chart-on-gke-autopilot-cluster",level:3},{value:"Install Helm chart on GKE Standard Cluster",id:"install-helm-chart-on-gke-standard-cluster",level:3},{value:"Ingress configuration",id:"ingress-configuration",level:2},{value:"Certificate Management",id:"certificate-management",level:2},{value:"Google-managed SSL certificates",id:"google-managed-ssl-certificates",level:3},{value:"Cert-Manager",id:"cert-manager",level:3},{value:"Clean up",id:"clean-up",level:2},{value:"Disable HTTP Load Balancing",id:"disable-http-load-balancing",level:3}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"quick-start-guide-for-google-cloud-platform-gke",children:"Quick Start Guide for Google Cloud Platform GKE"}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before you begin, you need to have a Google Cloud account, a project and install the following\ntools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/#kubectl",children:"kubectl"})," 1.28 or later"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm"})," 3.11 or later"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/install-sdk",children:"google-cloud-cli"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#install_plugin",children:"gke-gcloud-auth-plugin"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["For some operation systems we recommend install ",(0,s.jsx)(n.code,{children:"google-cloud-sdk"})," package instead of ",(0,s.jsx)(n.code,{children:"google-cloud-cli"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"initialize-the-gcloud-cli",children:"Initialize the gcloud CLI"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://cloud.google.com/sdk/docs/initializing",children:"Perform initial setup tasks"})," and set up your default project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud init\n"})}),"\n",(0,s.jsx)(n.h2,{id:"set-up-environment-variables",children:"Set up Environment Variables"}),"\n",(0,s.jsx)(n.p,{children:"Set up environment variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export REPO_LOCATION=us-central1\nexport CLUSTER_LOCATION=us-central1-a\nexport PROJECT_ID={your_project_id}\nexport CLUSTER_NAME={reportportal_cluster_name}\nexport REPO_NAME={reportportal_helm_repo_name}\nexport RELEASE_NAME={reportportal_release_name}\nexport VERSION={current_chart_version}\nexport SUPERADMIN_PASSWORD={your_superadmin_password}\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Here and below we use ",(0,s.jsx)(n.code,{children:"us-central1"})," region as a location for GKE cluster.",(0,s.jsx)("br",{}),"\nHowever, you can use any other region."]})}),"\n",(0,s.jsx)(n.h2,{id:"set-up-gcloud-credential-helper",children:"Set up gcloud credential helper"}),"\n",(0,s.jsx)(n.p,{children:"If you have Docker, you can use the Docker credential helper to authenticate to Artifact Registry."}),"\n",(0,s.jsx)(n.p,{children:"Just perform the following commands:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud auth login\ngcloud auth configure-docker ${REPO_LOCATION}-docker.pkg.dev\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can find more information about ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/artifact-registry/docs/docker/authentication#gcloud-helper",children:"gcloud credential helper"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"adjust-google-cloud-iam",children:"Adjust Google Cloud IAM"}),"\n",(0,s.jsx)(n.p,{children:"Installation of ReportPortal requires setting up access to your GKE cluster for creating\na service account in GKE and providing permissions for some services to access Kubernetes API."}),"\n",(0,s.jsxs)(n.p,{children:["For adjusting access, you can do it using ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control#iam-interaction",children:"both Identity and Access Management (IAM)\nand Kubernetes RBAC"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/iam#predefined",children:"Predefined GKE Roles"})," and update\nyour account role. To set a service account on nodes, you must also have the Service Account User role (roles/iam.serviceAccountUser)."]}),"\n",(0,s.jsx)(n.admonition,{type:"important",children:(0,s.jsxs)(n.p,{children:["We recommend to create a separate ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/iam/docs/service-accounts-create",children:"IAM Service Account"})," for working with GKE cluster."]})}),"\n",(0,s.jsx)(n.h2,{id:"create-a-gke-cluster",children:"Create a GKE cluster"}),"\n",(0,s.jsx)(n.admonition,{type:"important",children:(0,s.jsx)(n.p,{children:"All GKE clusters are created as public clusters by default."})}),"\n",(0,s.jsxs)(n.p,{children:["You can create ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters#modes",children:"two types"}),"\nof GKE clusters:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-overview",children:"Autopilot"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/concepts/choose-cluster-mode#why-standard",children:"Standard"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["We recommend to use Autopilot mode.",(0,s.jsx)("br",{}),"\nIt is a managed Kubernetes environment that reduces the operational cost."]})}),"\n",(0,s.jsx)(n.h3,{id:"create-a-cluster-in-autopilot-mode",children:"Create a cluster in Autopilot mode"}),"\n",(0,s.jsx)(n.p,{children:"It's pretty simple to create a cluster in Autopilot mode:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters create-auto ${CLUSTER_NAME} \\\n  --location=${REPO_LOCATION}\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["You can use the Google Filestore CSI driver for the Autopilot cluster.",(0,s.jsx)("br",{}),"\nIt is enabled by default.",(0,s.jsx)("br",{}),"\nMinimal storage size for Google Filestore is 1 TB.",(0,s.jsx)("br",{}),"\nCheck the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/filestore/pricing",children:"pricing"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["More information about ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-an-autopilot-cluster",children:"creating a cluster in Autopilot mode"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"create-a-cluster-in-standard-mode",children:"Create a cluster in Standard mode"}),"\n",(0,s.jsx)(n.p,{children:"For a standard cluster you need to specify a machine type and a number of nodes."}),"\n",(0,s.jsxs)(n.p,{children:["ReportPortal requires at least 3 nodes with 4 vCPU and 6 GB memory for each in\nthe Kubernetes with infrastructure dependencies.\nWe recommend using ",(0,s.jsx)(n.code,{children:"custom-4-6144"})," machine type with 4 vCPU and 6 GB memory\nas a minimal configuration."]}),"\n",(0,s.jsx)(n.p,{children:"If you want avoid using MinIO or Google Cloud Storage, you can use a filesystem storage type\nand Google Filestore as a storage class."}),"\n",(0,s.jsxs)(n.p,{children:["For this, you need to enable the ",(0,s.jsx)(n.code,{children:"Google Filestore CSI driver"})," when creating a cluster:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export MACHINE_TYPE=custom-4-6144\n\ngcloud container clusters create ${CLUSTER_NAME} \\\n  --addons=GcpFilestoreCsiDriver \\\n  --zone=${ZONE} \\\n  --machine-type=${MACHINE_TYPE}\n"})}),"\n",(0,s.jsx)(n.p,{children:"or you can enable it after the cluster creation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters update ${CLUSTER_NAME} \\\n  --update-addons=GcpFilestoreCsiDriver=ENABLED\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Minimal storage size for Google Filestore is 1 TB.",(0,s.jsx)("br",{}),"\nCheck the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/filestore/pricing",children:"pricing"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["More information about creating a ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster#gcloud",children:"cluster in Standard mode"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"get-cluster-credentials-for-kubectl",children:"Get cluster credentials for kubectl"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters get-credentials ${CLUSTER_NAME} \\\n  --location=${CLUSTER_LOCATION}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"verify-the-cluster-mode",children:"Verify the cluster mode"}),"\n",(0,s.jsx)(n.p,{children:"You can verify the cluster:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters describe ${CLUSTER_NAME} \\\n  --location=${CLUSTER_LOCATION}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"prepare-helm-package-for-installation",children:"Prepare Helm package for installation"}),"\n",(0,s.jsx)(n.p,{children:"At the current moment, you can install ReportPortal on GKE cluster via Helm chart only from\ndevelop branch."}),"\n",(0,s.jsx)(n.h3,{id:"create-a-repository",children:"Create a repository"}),"\n",(0,s.jsx)(n.p,{children:"Create a repository in Artifact Registry for ReportPortal Helm charts:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'gcloud artifacts repositories create ${REPO_NAME} --repository-format=docker \\\n  --location=${REPO_LOCATION} --description="ReportPortal Helm repository"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More information about ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/artifact-registry/docs/helm/store-helm-charts",children:"Store Helm charts in the Artifact Registry"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Verify that the repository was created:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud artifacts repositories list\n"})}),"\n",(0,s.jsx)(n.h3,{id:"authenticate-with-the-repository",children:"Authenticate with the repository"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud auth print-access-token | helm registry login -u oauth2accesstoken \\\n  --password-stdin https://${REPO_LOCATION}-docker.pkg.dev\n"})}),"\n",(0,s.jsx)(n.h3,{id:"build-and-push-helm-chart",children:"Build and push Helm chart"}),"\n",(0,s.jsx)(n.p,{children:"Add GitHub repository on your local machine:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/reportportal/kubernetes.git\n"})}),"\n",(0,s.jsx)(n.p,{children:"Build and push the Helm chart to Artifact Registry using actual helm chart version\nand your project id:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd kubernetes/reportportal\nhelm dependency update\nhelm package .\nhelm push reportportal-${VERSION}.tgz oci://${REPO_LOCATION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"install-reportportal-from-artifact-registry",children:"Install ReportPortal from Artifact Registry"}),"\n",(0,s.jsx)(n.h3,{id:"install-helm-chart-on-gke-autopilot-cluster",children:"Install Helm chart on GKE Autopilot Cluster"}),"\n",(0,s.jsx)(n.p,{children:"By default, ReportPortal Helm chart install with infrastructure dependencies in GKE Autopilot Cluster:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"PostgreSQL"}),"\n",(0,s.jsx)(n.li,{children:"OpenSearch"}),"\n",(0,s.jsx)(n.li,{children:"RabbitMQ"}),"\n",(0,s.jsx)(n.li,{children:"MinIO"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You can disable an installation of some components via Helm chart values, but you have to provide\nnew credentials for your standalone components."}),"\n",(0,s.jsxs)(n.p,{children:["More information about ",(0,s.jsx)(n.a,{href:"https://github.com/reportportal/kubernetes#install-the-chart-with-dependencies",children:"Installing the chart with dependencies"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"For installing ReportPortal on GKE Autopilot Cluster, you need to set the:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["ingress controller as a ",(0,s.jsx)(n.code,{children:"gce"})]}),"\n",(0,s.jsx)(n.li,{children:"superadmin password"}),"\n",(0,s.jsx)(n.li,{children:"resources requests for api, uat, and analyzer services"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n  --set ingress.class="gce" \\\n  --set uat.superadminInitPasswd.password=${SUPERADMIN_PASSWORD} \\\n  --set uat.resources.requests.memory="1Gi" \\\n  --set serviceapi.resources.requests.cpu="1000m" \\\n  --set serviceapi.resources.requests.memory="2Gi" \\\n  --set serviceanalyzer.resources.requests.memory="1Gi" \\\n  ${RELEASE_NAME} \\\n  oci://${REPO_LOCATION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}/reportportal \\\n  --version ${VERSION}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you want to use Google Filestore instead of MinIO, you need to set\nthe ",(0,s.jsx)(n.code,{children:"storage.type"})," to ",(0,s.jsx)(n.code,{children:"filesystem"}),", ",(0,s.jsx)(n.code,{children:"storage.volume.storageClassName"}),"\nto ",(0,s.jsx)(n.code,{children:"standard-rwx"}),", and disable MinIO installation:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n  --set ingress.class="gce" \\\n  --set uat.superadminInitPasswd.password=${SUPERADMIN_PASSWORD} \\\n  --set uat.resources.requests.memory="1Gi" \\\n  --set serviceapi.resources.requests.cpu="1000m" \\\n  --set serviceapi.resources.requests.memory="2Gi" \\\n  --set serviceanalyzer.resources.requests.memory="1Gi" \\\n  --set storage.type="filesystem" \\\n  --set storage.volume.storageClassName="standard-rwx" \\\n  --set minio.install=false \\\n  ${RELEASE_NAME} \\\n  oci://${REPO_LOCATION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}/reportportal \\\n  --version ${VERSION}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Minimal storage size for Google Filestore is 1 TB.",(0,s.jsx)("br",{}),"\nCheck the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/filestore/pricing",children:"pricing"}),"."]})}),"\n",(0,s.jsx)(n.blockquote,{children:"\n"}),"\n",(0,s.jsx)(n.h3,{id:"install-helm-chart-on-gke-standard-cluster",children:"Install Helm chart on GKE Standard Cluster"}),"\n",(0,s.jsx)(n.p,{children:"For installing ReportPortal on GKE Standard Cluster you need to set:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["ingress controller as a ",(0,s.jsx)(n.code,{children:"gce"})]}),"\n",(0,s.jsx)(n.li,{children:"superadmin password"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n  --set ingress.class="gce" \\\n  --set uat.superadminInitPasswd.password=${SUPERADMIN_PASSWORD} \\\n  ${RELEASE_NAME} \\\n  oci://${REPO_LOCATION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}/reportportal \\\n  --version ${VERSION}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you want to use Google Filestore instead of MinIO, you need to set\nthe ",(0,s.jsx)(n.code,{children:"storage.type"})," to ",(0,s.jsx)(n.code,{children:"filesystem"}),", ",(0,s.jsx)(n.code,{children:"storage.volume.storageClassName"}),"\nto ",(0,s.jsx)(n.code,{children:"standard-rwx"}),", and disable MinIO installation:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n  --set ingress.class="gce" \\\n  --set uat.superadminInitPasswd.password=${SUPERADMIN_PASSWORD} \\\n  --set storage.type="filesystem" \\\n  --set storage.volume.storageClassName="standard-rwx" \\\n  --set minio.install=false \\\n  ${RELEASE_NAME} \\\n  oci://${REPO_LOCATION}-docker.pkg.dev/${PROJECT_ID}/${REPO_NAME}/reportportal \\\n  --version ${VERSION}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Minimal storage size for Google Filestore is 1 TB.",(0,s.jsx)("br",{}),"\nCheck the ",(0,s.jsx)(n.a,{href:"https://cloud.google.com/filestore/pricing",children:"pricing"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"ingress-configuration",children:"Ingress configuration"}),"\n",(0,s.jsxs)(n.p,{children:["You can add custom gce ingress annotations via ",(0,s.jsx)(n.code,{children:"ingress.annotations.gce"})," parameter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n...\n  --set-json=\'ingress.annotations.gce={"key1":"value1","key2":"value2"}\'\n...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you have some domain name, set this FQDN to ",(0,s.jsx)(n.code,{children:"ingress.hosts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm install \\\n...\n  --set ingress.hosts[0].reportportal.k8.com\n...\n"})}),"\n",(0,s.jsx)(n.h2,{id:"certificate-management",children:"Certificate Management"}),"\n",(0,s.jsx)(n.h3,{id:"google-managed-ssl-certificates",children:"Google-managed SSL certificates"}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This is recommended approach for using SSL certificates in GKE."})}),"\n",(0,s.jsx)(n.p,{children:"You can use Google-managed SSL certificates for your domain name:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'helm install \\\n...\n  --set ingress.tls.certificate.gcpManaged=true\n  --set ingress.hosts\\[0\\]="example.com"\n...\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"cert-manager",children:"Cert-Manager"}),"\n",(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)(n.a,{href:"https://github.com/reportportal/kubernetes/blob/master/docs/cert-manager-config.md",children:"Cert-Manager"})," to manage certificates for your domain name."]}),"\n",(0,s.jsx)(n.h2,{id:"clean-up",children:"Clean up"}),"\n",(0,s.jsx)(n.p,{children:"To delete the cluster:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters delete ${CLUSTER_NAME} --location=${CLUSTER_LOCATION}\n"})}),"\n",(0,s.jsx)(n.p,{children:"To delete the artifacts repository:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcloud artifacts repositories delete ${CLUSTER_NAME} --location=${REPO_LOCATION}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"disable-http-load-balancing",children:"Disable HTTP Load Balancing"}),"\n",(0,s.jsx)(n.p,{children:"If you want to disable HTTP Load Balancing, you can do it after the certificate\nis attached to the Ingress resource:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'kubectl annotate ingress ${APP_NAME}-gateway-ingress kubernetes.io/ingress.allow-http: "false"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);